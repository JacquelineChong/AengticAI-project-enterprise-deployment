<section id="introduction">
    <h2>1. Introduction: Why a Data Lake is the Foundation of Data Transformation</h2>
    
    <div class="key-concept">
        <h3>Beyond Tool Implementation</h3>
        <p>Unlike traditional IT projects where systems are deployed and then used as-is, a data lake is a living foundation that grows in value through continuous contribution and utilization.</p>
        
        <div class="example-box">
            <h4>What This Means for a F&B Chain:</h4>
            <p>Imagine if we implemented a new POS system in all your restaurants. Once installed, it basically works the same way day after day. The system helps you process orders faster, but it doesn't inherently become more valuable over time.</p>
            <p>In contrast, think about your master chef who has been with you for 20 years. Every day, they learn something new about customer preferences, adjust recipes, and improve efficiency. The longer they work, the more valuable their knowledge becomes.</p>
            <p>A data lake works like your master chef, not like your POS system. Each day it collects more information about your customers, sales patterns, and operations. Over time, it builds an increasingly valuable repository of knowledge that can help you make better business decisions. The data lake becomes smarter and more valuable the more you use it, unlike traditional IT systems that just maintain their original functionality.</p>
        </div>
    </div>
    
    <div class="key-concept">
        <h3>Value Creation Model</h3>
        <p>Traditional IT projects follow a linear value creation model (requirements → build → use), while data lakes follow a flywheel model where each use generates more data and insights, creating compounding value.</p>
        
        <div class="example-box">
            <h4>What This Means for a F&B Chain:</h4>
            <p>When you open a new branch, you follow a linear process: find a location, renovate the space, hire staff, train them, and open for business. The value is created once the restaurant is operational.</p>
            <p>Consider your loyalty program. Initially, you might have basic customer information and purchase history. As you analyze this data, you notice certain customers always order milk tea on Mondays. You create a Monday milk tea promotion, which attracts more customers and generates more data about preferences. This new data reveals that these Monday customers also prefer pineapple buns, leading to a bundled promotion. Each insight creates new opportunities, which generate more data, which leads to more insights – creating a continuous cycle of increasing value.</p>
            <p>With traditional IT projects, you invest once and get a fixed return. With a data lake, your initial investment generates increasing returns over time as each data-driven decision creates more valuable data for future decisions.</p>
        </div>
    </div>
    
    <div class="key-concept">
        <h3>Ownership Model</h3>
        <p>Traditional IT projects are "built by IT, used by business," whereas data lakes are "co-created and continuously evolved" by both IT and business.</p>
        
        <div class="example-box">
            <h4>What This Means for a F&B Chain:</h4>
            <p>Think about your kitchen equipment. The equipment supplier installs the stoves and refrigerators, and then your chefs use them. The supplier doesn't need to understand how to make Hong Kong-style milk tea or the perfect scrambled egg sandwich – they just provide the tools.</p>
            <p>Now imagine if you had a magical kitchen that could adapt to how your chefs cook. For this to work, both the kitchen designer and the chefs would need to collaborate continuously. The chefs would need to explain their cooking techniques, and the kitchen designer would need to understand the culinary process to create the right adaptations.</p>
            <p>A data lake is like this magical kitchen. It can't be simply built by IT and handed over to the business. Your restaurant managers know which dishes are popular at different times of day, your procurement team understands seasonal ingredient pricing, and your marketing team knows which promotions attract new customers. All of this domain expertise must be combined with technical knowledge to create a truly valuable data ecosystem. Without continuous collaboration between business experts and technical staff, the data lake becomes just another underutilized IT system.</p>
        </div>
    </div>
    
<div class="comparison-model">
    <h3 class="comparison-title">Traditional IT Projects vs. Data Lake Implementation</h3>
    
    <div class="model-container">
        <div class="model-column traditional">
            <h4 class="model-heading">Traditional IT Project</h4>
            <div class="traditional-diagram">
                <div class="stage stage-1">
                    <div class="stage-icon">1</div>
                    <div class="stage-content">
                        <div class="actor actor-business">Business</div>
                        <div class="action-arrow">
                            <span class="arrow-text">Define Requirements</span>
                            <!-- Changed arrow to point down -->
                            <svg width="20" height="30" viewBox="0 0 20 30">
                                <path d="M10,0 L10,25 M3,18 L10,25 L17,18" fill="none" stroke="#666" stroke-width="2"/>
                            </svg>
                        </div>
                    </div>
                </div>
                
                <div class="stage stage-2">
                    <div class="stage-icon">2</div>
                    <div class="stage-content">
                        <div class="actor actor-it">IT Department</div>
                        <div class="action-box">
                            <div class="action-item">Design</div>
                            <div class="action-item">Build</div>
                            <div class="action-item">Test</div>
                        </div>
                    </div>
                </div>
                
                <div class="stage stage-3">
                    <div class="stage-icon">3</div>
                    <div class="stage-content">
                        <div class="actor actor-it">IT Department</div>
                        <div class="action-arrow">
                            <span class="arrow-text">Deliver System</span>
                            <!-- Changed arrow to point down -->
                            <svg width="20" height="30" viewBox="0 0 20 30">
                                <path d="M10,0 L10,25 M3,18 L10,25 L17,18" fill="none" stroke="#666" stroke-width="2"/>
                            </svg>
                        </div>
                    </div>
                </div>
                
                <div class="stage stage-4">
                    <div class="stage-icon">4</div>
                    <div class="stage-content">
                        <div class="actor actor-business">Business</div>
                        <div class="action-box final-box">
                            <div class="action-item final-action">Use Static System</div>
                            <div class="value-line">
                                <span class="value-label">Value</span>
                                <span class="value-curve linear"></span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="diagram-caption">
                    Linear, handoff-based process with fixed value potential
                </div>
            </div>
        </div>
        
        <div class="model-column data-lake">
            <h4 class="model-heading">Data Lake Implementation</h4>
            <div class="data-lake-diagram">
                <div class="cycle-container">
                    <div class="cycle-center">
                        <div class="center-icon">
                            <svg width="40" height="40" viewBox="0 0 40 40">
                                <path d="M20,5 C12.3,5 5,12.3 5,20 C5,27.7 12.3,35 20,35 C27.7,35 35,27.7 35,20 C35,12.3 27.7,5 20,5 Z" fill="none" stroke="#3498db" stroke-width="2"/>
                                <path d="M20,10 L20,20 L28,25" fill="none" stroke="#3498db" stroke-width="2" stroke-linecap="round"/>
                            </svg>
                        </div>
                        <div class="center-text">Data<br>Lake</div>
                    </div>
                    
                    <!-- Position adjustments for nodes are in the CSS below -->
                    <div class="cycle-node node-1">
                        <div class="node-content">
                            <div class="node-title">Business Identifies<br>Opportunity</div>
                            <div class="node-icon">
                                <svg width="24" height="24" viewBox="0 0 24 24">
                                    <path d="M12,2 L2,7 L12,12 L22,7 Z" fill="#f39c12"/>
                                    <path d="M2,12 L12,17 L22,12" fill="none" stroke="#f39c12" stroke-width="2"/>
                                    <path d="M2,17 L12,22 L22,17" fill="none" stroke="#f39c12" stroke-width="2"/>
                                </svg>
                            </div>
                        </div>
                    </div>
                    
                    <div class="cycle-node node-2">
                        <div class="node-content">
                            <div class="node-title">Collaborative<br>Solution Design</div>
                            <div class="node-icon">
                                <svg width="24" height="24" viewBox="0 0 24 24">
                                    <circle cx="6" cy="8" r="4" fill="#3498db"/>
                                    <circle cx="18" cy="8" r="4" fill="#3498db"/>
                                    <circle cx="12" cy="18" r="4" fill="#3498db"/>
                                    <line x1="6" y1="8" x2="18" y2="8" stroke="#3498db" stroke-width="1"/>
                                    <line x1="6" y1="8" x2="12" y2="18" stroke="#3498db" stroke-width="1"/>
                                    <line x1="18" y1="8" x2="12" y2="18" stroke="#3498db" stroke-width="1"/>
                                </svg>
                            </div>
                        </div>
                    </div>
                    
                    <div class="cycle-node node-3">
                        <div class="node-content">
                            <div class="node-title">Iterative<br>Development</div>
                            <div class="node-icon">
                                <svg width="24" height="24" viewBox="0 0 24 24">
                                    <path d="M20,8 C18,4 13,3 9,5 C5,7 4,12 6,16 C8,20 13,21 17,19 C19,18 20,16 21,14" fill="none" stroke="#9b59b6" stroke-width="2"/>
                                    <path d="M16,4 L20,8 L16,12" fill="none" stroke="#9b59b6" stroke-width="2"/>
                                </svg>
                            </div>
                        </div>
                    </div>
                    
                    <div class="cycle-node node-4">
                        <div class="node-content">
                            <div class="node-title">Business<br>Implementation</div>
                            <div class="node-icon">
                                <svg width="24" height="24" viewBox="0 0 24 24">
                                    <rect x="2" y="4" width="20" height="16" rx="2" fill="none" stroke="#2ecc71" stroke-width="2"/>
                                    <path d="M8,11 L11,14 L17,8" fill="none" stroke="#2ecc71" stroke-width="2"/>
                                </svg>
                            </div>
                        </div>
                    </div>
                    
                    <div class="cycle-node node-5">
                        <div class="node-content">
                            <div class="node-title">Data Generation<br>& Insights</div>
                            <div class="node-icon">
                                <svg width="24" height="24" viewBox="0 0 24 24">
                                    <path d="M5,21 L5,3 M5,16 L10,16 M5,12 L12,12 M5,8 L8,8" fill="none" stroke="#e74c3c" stroke-width="2"/>
                                    <path d="M14,21 L14,9 M14,16 L19,16 M14,12 L17,12" fill="none" stroke="#e74c3c" stroke-width="2"/>
                                </svg>
                            </div>
                        </div>
                    </div>
                    
                    <div class="cycle-arrows">
                        <svg width="300" height="300" viewBox="0 0 300 300" class="arrows-svg">
                            <path class="cycle-path" d="M150,50 C220,50 250,80 280,150 C250,220 220,250 150,250 C80,250 50,220 20,150 C50,80 80,50 150,50" fill="none" stroke="#ddd" stroke-width="4" stroke-dasharray="8 4"/>
                            <path class="arrow-path" d="M265,130 L280,150 L265,170" fill="none" stroke="#888" stroke-width="2"/>
                            <path class="arrow-path" d="M35,170 L20,150 L35,130" fill="none" stroke="#888" stroke-width="2"/>
                        </svg>
                    </div>
                </div>
                
               <div class="value-growth">
        <div class="value-label">Value Growth</div>
        <div class="value-curve-container">
            <svg width="100%" height="40" viewBox="0 0 200 40" preserveAspectRatio="none">
                <path class="compound-curve" d="M0,38 C40,35 70,25 100,15 C130,5 160,2 200,5" stroke="#3498db" stroke-width="2" fill="none"/>
                <line x1="0" y1="38" x2="200" y2="38" stroke="#eee" stroke-width="1"/>
            </svg>
        </div>
        <div class="time-label">Time →</div>
    </div>
                
                <div class="diagram-caption">
                    Cyclical, collaborative process with continuously increasing value
                </div>
            </div>
        </div>
    </div>
</div>  
  
    <div class="key-message">
        <h3>Key Message:</h3>
        <p>The data lake is not a one-time project but the foundation of an evolving data ecosystem that requires continuous business participation. It's a strategic asset that becomes more valuable over time through collaboration between business and technical teams.</p>
    </div>
    
    <div class="visualization">
        <h3>A data transformation approach results in collaboration that creates ongoing value</h3>
        <div class="diagram-container">
            <canvas id="dataTransformationCanvas" width="1000" height="800"></canvas>
        </div>
        <div class="diagram-caption">
            <p><strong>Flow of data ———→</strong></p>
            <p><em>Continuous collaboration between business departments and technical teams creates a self-reinforcing cycle that unlocks increasing value from your data assets.</em></p>
        </div>
    </div>
  
<div class="navigation-buttons">
    <a href="https://jacquelinechong.github.io/Data-Transformation-Playbook-Opearting-Model-SME.html" class="nav-button back-button">
        <span class="button-icon">←</span> Back to Playbook Home
    </a>
</div>  
  
</section>

<style>
    #introduction {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        line-height: 1.6;
        color: #333;
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px;
    }
    
    h2 {
        color: #2c3e50;
        border-bottom: 2px solid #3498db;
        padding-bottom: 10px;
        margin-bottom: 30px;
    }
    
    h3 {
        color: #2c3e50;
        margin-top: 30px;
    }
    
    .key-concept {
        margin-bottom: 40px;
        border-left: 4px solid #3498db;
        padding-left: 20px;
    }
    
    .example-box {
        background-color: #f8f9fa;
        border-radius: 8px;
        padding: 20px;
        margin: 15px 0;
        box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    
    .example-box h4 {
        color: #3498db;
        margin-top: 0;
    }
    
    .key-message {
        background-color: #e3f2fd;
        border-radius: 8px;
        padding: 20px;
        margin: 30px 0;
        border-left: 4px solid #2196f3;
    }
    
    .visualization {
        margin-top: 50px;
    }
    
    .diagram-container {
        max-width: 1000px;
        margin: 0 auto;
        border: 1px solid #e0e0e0;
        background-color: white;
    }
    
    .diagram-caption {
        margin-top: 20px;
        max-width: 1000px;
        margin-left: auto;
        margin-right: auto;
        text-align: right;
        font-size: 0.9em;
    }
    
    canvas {
        display: block;
        margin: 0 auto;
        max-width: 100%;
        height: auto;
    }
  
/* Increase the size of the model-circle */
.model-circle {
    width: 800px;  /* Increased from 700px */
    height: 800px; /* Increased from 700px */
    margin: 0 auto;
    position: relative;
}

/* Increase the size of the center circle */
.center-circle {
    width: 240px;  /* Increased from 200px */
    height: 240px; /* Increased from 200px */
    font-size: 1.2rem; /* Make text slightly larger */
}

/* Increase the size of the outer segments */
.outer-segment {
    width: 240px;  /* Increased from 200px */
    height: 240px; /* Increased from 200px */
    font-size: 1.1rem; /* Make text slightly larger */
}

/* Adjust the positions of the segments to maintain proportions */
.segment-1 {
    top: 60px; /* Adjusted from 50px */
}

.segment-2 {
    bottom: 60px; /* Adjusted from 50px */
    left: 120px; /* Adjusted from 100px */
}

.segment-3 {
    bottom: 60px; /* Adjusted from 50px */
    right: 120px; /* Adjusted from 100px */
}

/* Adjust the highlight box */
.highlight-box {
    width: 290px; /* Increased from 250px */
    height: 290px; /* Increased from 250px */
    bottom: 35px; /* Adjusted from 25px */
    right: 95px; /* Adjusted from 75px */
}

/* Adjust the connection lines for the larger diagram */
.line-1 {
    width: 120px; /* Increased from 100px */
}

.line-2, .line-3 {
    height: 180px; /* Increased from 150px */
}

/* Also update the mobile responsiveness for the larger diagram */
@media (max-width: 840px) {
    .model-circle {
        width: 100%;
        height: 600px; /* Increased from 500px */
    }
    
    /* Other responsive adjustments as needed */
}
  
/* Navigation buttons styles */
.navigation-buttons {
    margin: 40px 0;
    text-align: center;
}

.nav-button {
    display: inline-block;
    padding: 12px 24px;
    background-color: var(--primary-color);
    color: white;
    text-decoration: none;
    border-radius: 6px;
    font-weight: bold;
    transition: all 0.3s ease;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
}

.nav-button:hover {
    background-color: var(--secondary-color);
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(0,0,0,0.15);
}

.button-icon {
    margin-right: 8px;
    font-weight: bold;
}

.back-button {
    background-color: #2c3e50;
}

.back-button:hover {
    background-color: #1a252f;
}  
    .comparison-model {
        margin: 50px 0;
        padding: 20px;
        background-color: #f8f9fa;
        border-radius: 10px;
    }
    
    .comparison-title {
        text-align: center;
        margin-bottom: 30px;
        color: #2c3e50;
        font-size: 1.4rem;
    }
    
    .model-container {
        display: flex;
        flex-wrap: wrap;
        gap: 20px;
        justify-content: center;
    }
    
    .model-column {
        flex: 1;
        min-width: 300px;
        max-width: 450px;
        padding: 15px;
        border-radius: 8px;
    }
    
    .traditional {
        background-color: rgba(236, 240, 241, 0.5);
        border: 1px solid #ddd;
    }
    
    .data-lake {
        background-color: rgba(52, 152, 219, 0.05);
        border: 1px solid #bde0f3;
    }
    
    .model-heading {
        text-align: center;
        margin-bottom: 20px;
        padding-bottom: 10px;
        border-bottom: 2px solid #3498db;
        color: #2c3e50;
    }
    
    /* Traditional IT Project Diagram */
    .traditional-diagram {
        display: flex;
        flex-direction: column;
        gap: 15px;
    }
    
    .stage {
        display: flex;
        align-items: flex-start;
        gap: 10px;
        margin-bottom: 10px;
    }
    
    .stage-icon {
        display: flex;
        justify-content: center;
        align-items: center;
        width: 30px;
        height: 30px;
        background-color: #3498db;
        color: white;
        border-radius: 50%;
        font-weight: bold;
        flex-shrink: 0;
    }
    
    .stage-content {
        flex-grow: 1;
    }
    
    .actor {
        padding: 8px 12px;
        border-radius: 4px;
        font-weight: bold;
        font-size: 0.9rem;
        margin-bottom: 8px;
        text-align: center;
    }
    
    .actor-business {
        background-color: #f39c12;
        color: white;
    }
    
    .actor-it {
        background-color: #3498db;
        color: white;
    }
    
    .action-arrow {
        display: flex;
        flex-direction: column; /* Changed to column to align arrow downward */
        align-items: center;
        padding: 8px 0;
        gap: 5px;
    }
    
    .arrow-text {
        font-size: 0.9rem;
        color: #666;
        margin-bottom: 5px; /* Added margin for spacing */
    }
    
    .action-box {
        border: 1px solid #ddd;
        border-radius: 4px;
        overflow: hidden;
    }
    
    .action-item {
        padding: 8px 180px;
        border-bottom: 1px solid #ddd;
        font-size: 0.9rem;
        background-color: #fff;
    }
    
    .action-item:last-child {
        border-bottom: none;
    }
    
    .final-box {
        background-color: #f8f9fa;
    }
    
    .final-action {
        font-weight: bold;
        background-color: #f8f9fa;
    }
    
    .value-line {
        display: flex;
        align-items: center;
        padding: 8px 12px;
        gap: 10px;
        border-top: 1px dashed #ddd;
    }
    
    .value-label {
        font-size: 0.8rem;
        color: #666;
    }
    
    .value-curve {
        flex-grow: 1;
        height: 20px;
        display: flex;
        align-items: center;
    }
    
    .linear {
        background: linear-gradient(to right, #f8f9fa, #3498db);
        height: 3px;
    }
    
    /* Data Lake Diagram */
    .data-lake-diagram {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 20px;
    }
    
    .cycle-container {
        position: relative;
        width: 300px; /* Increased from 250px */
        height: 300px; /* Increased from 250px */
        margin: 20px 0;
    }
    
    .cycle-center {
        position: absolute;
        width: 70px;
        height: 70px;
        background-color: #f0f7fa;
        border: 2px solid #3498db;
        border-radius: 50%;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        z-index: 10;
        padding: 5px;
    }
    
    .center-icon {
        margin-bottom: 2px;
    }
    
    .center-text {
        font-size: 0.8rem;
        font-weight: bold;
        text-align: center;
        color: #3498db;
    }
    
    .cycle-node {
        position: absolute;
        width: 90px; /* Reduced from 100px to fit better */
        height: 90px; /* Reduced from 100px to fit better */
        display: flex;
        align-items: center;
        justify-content: center;
    }
    
    .node-content {
        background-color: white;
        border: 1px solid #ddd;
        border-radius: 8px;
        padding: 10px;
        display: flex;
        flex-direction: column;
        align-items: center;
        text-align: center;
        box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        width: 100%;
        height: 100%;
    }
    
    .node-title {
        font-size: 0.8rem;
        margin-bottom: 8px;
    }
    
    .node-icon {
        display: flex;
        justify-content: center;
        align-items: center;
    }
    
    /* Updated node positions to be more spread out */
    .node-1 {
        top: -5%;
        left: 50%;
        transform: translateX(-50%);
    }
    
    .node-2 {
        top: 2%;
        right: 2%;
    }
    
    .node-3 {
        bottom: 10%;
        right: -10%;
    }
    
    .node-4 {
        bottom: -5%;
        left: 50%;
        transform: translateX(-50%);
    }
    
    .node-5 {
        bottom: 40%;
        left: -15%;
    }
    
    .cycle-arrows {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: 5;
    }
    
    .arrows-svg {
        width: 100%;
        height: 100%;
    }
    
    .value-growth {
        display: flex;
        flex-direction: column;
        align-items: center;
        width: 100%;
        padding: 10px;
        background-color: #fff;
        border: 1px solid #ddd;
        border-radius: 4px;
    }
    
    .value-label {
        font-size: 0.8rem;
        color: #666;
        margin-bottom: 5px;
    }
  
      /* Replace the compound class and add this new style for the curve container */
    .value-curve-container {
        width: 100%;
        height: 40px;
        position: relative;
        background-color: #fff;
    }
    
    .compound-curve {
        stroke-dasharray: none;
        stroke-linecap: round;
    }
    
    
    .time-label {
        font-size: 0.8rem;
        color: #666;
        align-self: flex-end;
        margin-top: 5px;
    }
    
    .diagram-caption {
        text-align: center;
        font-size: 0.9rem;
        font-style: italic;
        color: #666;
        margin-top: 10px;
    }
    
    @media (max-width: 768px) {
        .model-container {
            flex-direction: column;
            align-items: center;
        }
        
        .model-column {
            width: 100%;
        }
        
        .cycle-container {
            width: 280px;
            height: 280px;
        }
        
        .cycle-node {
            width: 80px;
            height: 80px;
        }
    }  
  
</style>

<script>
    window.addEventListener('load', function() {
        // Get the canvas element and its 2D context
        const canvas = document.getElementById('dataTransformationCanvas');
        const ctx = canvas.getContext('2d');
        
        // Set canvas dimensions based on its display size
        const displayWidth = canvas.clientWidth;
        const displayHeight = canvas.clientHeight;
        
        if (canvas.width !== displayWidth || canvas.height !== displayHeight) {
            canvas.width = displayWidth;
            canvas.height = displayHeight;
        }
        
        // Define colors
        const colors = {
            background: '#ffffff',
            boxBorder: '#333333',
            sectionHeading: '#333333',
            systemBox: '#ffffff',
            dataStoreBox: '#3498db',
            dataProductBox: '#f0f0f0',
            consumptionBox: '#4169e1',
            useCaseBox: '#ffffff',
            text: '#000000',
            textLight: '#ffffff'
        };
        
        // Define column widths and spacing
        const padding = 25;
        const headerHeight = 80;
        const columnSpacing = 15;
        const columns = 5;
        const columnWidth = (canvas.width - (padding * 2) - (columnSpacing * (columns - 1))) / columns;
        
        // Drawing functions
        function drawRoundedRect(x, y, width, height, radius, fill, stroke) {
            ctx.beginPath();
            ctx.moveTo(x + radius, y);
            ctx.lineTo(x + width - radius, y);
            ctx.quadraticCurveTo(x + width, y, x + width, y + radius);
            ctx.lineTo(x + width, y + height - radius);
            ctx.quadraticCurveTo(x + width, y + height, x + width - radius, y + height);
            ctx.lineTo(x + radius, y + height);
            ctx.quadraticCurveTo(x, y + height, x, y + height - radius);
            ctx.lineTo(x, y + radius);
            ctx.quadraticCurveTo(x, y, x + radius, y);
            ctx.closePath();
            
            if (fill) {
                ctx.fillStyle = fill;
                ctx.fill();
            }
            
            if (stroke) {
                ctx.strokeStyle = stroke;
                ctx.lineWidth = 2;
                ctx.stroke();
            }
        }
        
        function drawCircle(x, y, radius, fill, stroke) {
            ctx.beginPath();
            ctx.arc(x, y, radius, 0, Math.PI * 2);
            ctx.closePath();
            
            if (fill) {
                ctx.fillStyle = fill;
                ctx.fill();
            }
            
            if (stroke) {
                ctx.strokeStyle = stroke;
                ctx.lineWidth = 2;
                ctx.stroke();
            }
        }
        
        function drawArrow(fromX, fromY, toX, toY) {
            // Draw line
            ctx.beginPath();
            ctx.moveTo(fromX, fromY);
            ctx.lineTo(toX, toY);
            ctx.strokeStyle = colors.boxBorder;
            ctx.lineWidth = 2;
            ctx.stroke();
            
            // Draw arrowhead
            const headLength = 10;
            const dx = toX - fromX;
            const dy = toY - fromY;
            const angle = Math.atan2(dy, dx);
            
            ctx.beginPath();
            ctx.moveTo(toX, toY);
            ctx.lineTo(toX - headLength * Math.cos(angle - Math.PI/6), toY - headLength * Math.sin(angle - Math.PI/6));
            ctx.lineTo(toX - headLength * Math.cos(angle + Math.PI/6), toY - headLength * Math.sin(angle + Math.PI/6));
            ctx.closePath();
            ctx.fillStyle = colors.boxBorder;
            ctx.fill();
        }
        
        function drawBracket(startX, startY, endX, endY) {
            const radius = 15;
            
            ctx.beginPath();
            ctx.moveTo(startX, startY);
            ctx.lineTo(startX - radius, startY);
            ctx.quadraticCurveTo(startX - radius * 2, startY, startX - radius * 2, startY + radius);
            ctx.lineTo(startX - radius * 2, endY - radius);
            ctx.quadraticCurveTo(startX - radius * 2, endY, startX - radius, endY);
            ctx.lineTo(startX, endY);
            ctx.strokeStyle = colors.boxBorder;
            ctx.lineWidth = 2;
            ctx.stroke();
        }
        
        // Draw section headers
        ctx.font = 'bold 16px Arial';
        ctx.fillStyle = colors.sectionHeading;
        ctx.textAlign = 'center';
        
        const headers = [
            "Data\nSources",
            "Data\nPlatform", 
            "Data\nDomains", 
            "Consumption\nArchetypes", 
            "Use\nCases"
        ];
        
        headers.forEach((header, index) => {
            const x = padding + (columnWidth + columnSpacing) * index + columnWidth/2;
            const lines = header.split('\n');
            
            lines.forEach((line, lineIndex) => {
                ctx.fillText(
                    line, 
                    x, 
                    padding + 20 + lineIndex * 20
                );
            });
        });
        
        // Draw flow of data text
        ctx.font = 'bold 14px Arial';
        ctx.fillStyle = colors.sectionHeading;
        ctx.textAlign = 'right';
        ctx.fillText("Flow of data", canvas.width - padding - 20, padding + 10);
        
        // Draw arrow for flow of data
        drawArrow(canvas.width - padding - 15, padding + 10, canvas.width - padding, padding + 10);
        
        // Column 1: Data Sources
        const sourceY = headerHeight + padding;
        const sourceHeight = 120;
        const sourceGap = 15;
        
        const sources = [
            { name: "Core POS\nSystems", height: sourceHeight },
            { name: "Inventory\nSystem", height: sourceHeight },
            { name: "External\nData", height: sourceHeight }
        ];
        
        let currentY = sourceY;
        sources.forEach(source => {
            drawRoundedRect(
                padding, 
                currentY, 
                columnWidth, 
                source.height, 
                10, 
                colors.systemBox, 
                colors.boxBorder
            );
            
            // Add text
            ctx.font = '14px Arial';
            ctx.fillStyle = colors.text;
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            
            const lines = source.name.split('\n');
            lines.forEach((line, index) => {
                ctx.fillText(
                    line, 
                    padding + columnWidth/2, 
                    currentY + source.height/2 - (lines.length - 1) * 10 + index * 20
                );
            });
            
            currentY += source.height + sourceGap;
        });
        
        // Column 2: Data Platform
        const platformY = headerHeight + padding;
        const platformHeight = 140;
        const platformGap = 15;
        
        const platforms = [
            { name: "Data\nWarehouse", height: platformHeight },
            { name: "Raw Data\nLake", height: platformHeight },
            { name: "Operational\nData Store", height: platformHeight }
        ];
        
        currentY = platformY;
        platforms.forEach(platform => {
            drawRoundedRect(
                padding + columnWidth + columnSpacing, 
                currentY, 
                columnWidth, 
                platform.height, 
                10, 
                colors.dataStoreBox, 
                colors.boxBorder
            );
            
            // Add text
            ctx.font = '14px Arial';
            ctx.fillStyle = colors.textLight;
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            
            const lines = platform.name.split('\n');
            lines.forEach((line, index) => {
                ctx.fillText(
                    line, 
                    padding + columnWidth + columnSpacing + columnWidth/2, 
                    currentY + platform.height/2 - (lines.length - 1) * 10 + index * 20
                );
            });
            
            currentY += platform.height + platformGap;
        });
        
        // Draw arrow from column 1 to column 2
        drawArrow(
            padding + columnWidth, 
            headerHeight + padding + (sources.length * sourceHeight + (sources.length - 1) * sourceGap) / 2, 
            padding + columnWidth + columnSpacing, 
            headerHeight + padding + (platforms.length * platformHeight + (platforms.length - 1) * platformGap) / 2
        );
        
        // Column 3: Data Products
        const productX = padding + 2 * (columnWidth + columnSpacing);
        const productY = headerHeight + padding;
        const productHeight = 380;  // Tall enough to span most of the diagram
        const productRadius = 25;
        const productGap = 15;
        
        // Draw main rounded rectangle
        drawRoundedRect(
            productX, 
            productY, 
            columnWidth, 
            productHeight, 
            20, 
            colors.dataProductBox, 
            colors.boxBorder
        );
        
        // Add data product circles
        const products = [
            "Menu & Pricing",
            "Customer",
            "Branch",
            "Inventory",
            "Staff"
        ];
        
        const productCircleRadius = 30;
        const productCircleY = productY + 60;
        const productCircleGap = 65;
        
        products.forEach((product, index) => {
            const y = productCircleY + index * productCircleGap;
            
            // Draw circle
            drawCircle(
                productX + columnWidth/2, 
                y, 
                productCircleRadius, 
                '#ffffff', 
                colors.boxBorder
            );
            
            // Add text
            ctx.font = '12px Arial';
            ctx.fillStyle = colors.text;
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            
            // Split text if needed
            if (product.includes(" ")) {
                const parts = product.split(" ");
                ctx.fillText(parts[0], productX + columnWidth/2, y - 8);
                ctx.fillText(parts[1], productX + columnWidth/2, y + 8);
            } else {
                ctx.fillText(product, productX + columnWidth/2, y);
            }
        });
        
        // Draw bracket from column 2 to column 3
        drawBracket(
            productX, 
            productY + 30, 
            productX, 
            productY + productHeight - 30
        );
        
        // Column 4: Consumption Archetypes
        const consumptionX = padding + 3 * (columnWidth + columnSpacing);
        const consumptionY = headerHeight + padding + 20;
        const consumptionHeight = 60;
        const consumptionGap = 25;
        
        const consumptions = [
            "Business\nIntelligence",
            "Advanced\nAnalytics",
            "Reporting",
            "External\nData Sharing",
            "Discovery\nSandbox"
        ];
        
        currentY = consumptionY;
        consumptions.forEach((consumption, index) => {
            drawRoundedRect(
                consumptionX, 
                currentY, 
                columnWidth, 
                consumptionHeight, 
                20, 
                colors.consumptionBox, 
                colors.boxBorder
            );
            
            // Add text
            ctx.font = '14px Arial';
            ctx.fillStyle = colors.textLight;
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            
            const lines = consumption.split('\n');
            lines.forEach((line, lineIndex) => {
                ctx.fillText(
                    line, 
                    consumptionX + columnWidth/2, 
                    currentY + consumptionHeight/2 - (lines.length - 1) * 10 + lineIndex * 20
                );
            });
            
            // Draw horizontal lines connecting to data products
            const productCircleY = productY + 60 + (Math.min(index, products.length - 1) * productCircleGap);
            
            // Connect to appropriate data product or to multiple
            if (index < products.length) {
                drawArrow(
                    productX + columnWidth, 
                    productCircleY, 
                    consumptionX, 
                    currentY + consumptionHeight/2
                );
            }
            
            currentY += consumptionHeight + consumptionGap;
        });
        
        // Column 5: Use Cases
        const useCaseX = padding + 4 * (columnWidth + columnSpacing);
        const useCaseY = headerHeight + padding + 20;
        const useCaseHeight = 60;
        const useCaseGap = 10;
        
        const useCases = [
            "Mobile Ordering\nApp",
            "Customer Loyalty\nProgram",
            "Menu\nOptimization",
            "Staff Scheduling\nAssistant",
            "Financial\nReporting",
            "Customer Churn\nPrediction",
            "Inventory\nOptimization"
        ];
        
        currentY = useCaseY;
        useCases.forEach((useCase, index) => {
            drawRoundedRect(
                useCaseX, 
                currentY, 
                columnWidth, 
                useCaseHeight, 
                10, 
                colors.useCaseBox, 
                colors.boxBorder
            );
            
            // Add text
            ctx.font = '13px Arial';
            ctx.fillStyle = colors.text;
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            
            const lines = useCase.split('\n');
            lines.forEach((line, lineIndex) => {
                ctx.fillText(
                    line, 
                    useCaseX + columnWidth/2, 
                    currentY + useCaseHeight/2 - (lines.length - 1) * 10 + lineIndex * 20
                );
            });
            
            // Connect to consumption archetypes
            // First 2 use cases connect to Business Intelligence
            if (index < 2) {
                drawArrow(
                    consumptionX + columnWidth, 
                    consumptionY + consumptionHeight/2, 
                    useCaseX, 
                    currentY + useCaseHeight/2
                );
            }
            // Next 2 use cases connect to Advanced Analytics
            else if (index < 4) {
                drawArrow(
                    consumptionX + columnWidth, 
                    consumptionY + consumptionHeight + consumptionGap + consumptionHeight/2, 
                    useCaseX, 
                    currentY + useCaseHeight/2
                );
            }
            // Next use case connects to Reporting
            else if (index < 5) {
                drawArrow(
                    consumptionX + columnWidth, 
                    consumptionY + 2 * (consumptionHeight + consumptionGap) + consumptionHeight/2, 
                    useCaseX, 
                    currentY + useCaseHeight/2
                );
            }
            // Next use case connects to External Data Sharing
            else if (index < 6) {
                drawArrow(
                    consumptionX + columnWidth, 
                    consumptionY + 3 * (consumptionHeight + consumptionGap) + consumptionHeight/2, 
                    useCaseX, 
                    currentY + useCaseHeight/2
                );
            }
            // Last use case connects to Discovery Sandbox
            else {
                drawArrow(
                    consumptionX + columnWidth, 
                    consumptionY + 4 * (consumptionHeight + consumptionGap) + consumptionHeight/2, 
                    useCaseX, 
                    currentY + useCaseHeight/2
                );
            }
            
            currentY += useCaseHeight + useCaseGap;
        });
    });
</script>
